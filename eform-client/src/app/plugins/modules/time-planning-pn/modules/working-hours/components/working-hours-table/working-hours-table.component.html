<ng-template #toolbarTpl>
  <app-working-hours-header
    [workingHoursRequest]="workingHoursRequest"
    [tainted]="tainted"
    [availableSites]="availableSites"
    (filtersChanged)="filtersChanged.emit($event)"
    (updateWorkingHours)="updateWorkingHours.emit()"
  ></app-working-hours-header>
</ng-template>

<mtx-grid
  [data]="workingHoursFormArray.controls"
  [columns]="tableHeaders"
  [showPaginator]="false"
  [pageOnFront]="false"
  [rowStriped]="true"
  [showToolbar]="true"
  [showColumnMenuButton]="false"
  [toolbarTemplate]="toolbarTpl"
  [rowClassFormatter]="rowClassFormatter"
  style="max-height: 80vh;"
>
</mtx-grid>

<ng-template #shiftSelectorTpl let-row let-index="index" let-col="colDef">
  <mat-form-field [formGroup]="row">
    <mtx-select
      [items]="hoursPickerArray"
      [appendTo]="'body'"
      bindValue="id"
      bindLabel="value"
      placeholder="{{'Select' | translate}}"
      [formControlName]="col.field"
      class="shift-select"
    ></mtx-select>
  </mat-form-field>
</ng-template>

<ng-template #inputTextTpl let-row let-index="index" let-col="colDef">
  <mat-form-field
    [formGroup]="row"
    (click)="col.field === 'commentOffice' ? openEditCommentOfficeModal(row) : undefined"
  >
    <input
      matInput
      type="text"
      [formControlName]="col.field"
    >
  </mat-form-field>
</ng-template>

<ng-template #inputNumberTpl let-row let-index="index" let-col="colDef">
  <mat-form-field class="hours-input" [formGroup]="row">
    <input matInput type="number" step="0.05" id="planHoursInput" [formControlName]="col.field">
  </mat-form-field>
</ng-template>

<ng-template #messageSelectorTpl let-row let-index="index" let-col="colDef">
  <mat-form-field style="min-width: 160px" [formGroup]="row">
    <mtx-select
      [appendTo]="'body'"
      [items]="messages"
      bindLabel="value"
      bindValue="id"
      [clearable]="false"
      formControlName="{{col.field}}"
      dropdownPosition="top"
      [placeholder]="'Message' | translate"
    ></mtx-select>
  </mat-form-field>
</ng-template>
